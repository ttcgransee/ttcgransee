<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Welthandel</title>

  <!-- Tailwind & Fonts & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Raleway:wght@300;400;500&display=swap" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"/>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    html, body {
      margin:0; padding:0; width:100%; min-height:100%;
      background:#F5F5F5; color:#333;
      font-family:'Montserrat',sans-serif;
    }
    .slide-container { width:100%; min-height:720px; display:flex; flex-direction:column; }
    .slide-header {
      background:#2A3B32; color:#fff;
      padding:1.25rem 2rem;
      display:flex; justify-content:space-between; align-items:center;
    }
    .title { margin:0; font-weight:700; font-size:2.1rem; }
    .divider { width:90px; height:4px; background:#E6B400; border-radius:3px; margin-top:.6rem; }
    .slide-content {
      flex:1 1 auto;
      padding:1.25rem 2rem 1.5rem 2rem;
      display:flex; flex-direction:column; gap:1rem;
    }

    .materials-grid {
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:1rem;
    }
    .material {
      background:#fff;
      border:1px solid #E5E7EB;
      border-radius:12px;
      box-shadow:0 2px 8px rgba(0,0,0,.05);
      overflow:hidden;
      display:flex; flex-direction:column;
    }
    .mat-head {
      display:flex; align-items:center; gap:.6rem;
      padding:.7rem .9rem;
      background:#F9FAFB;
      border-bottom:1px solid #E5E7EB;
    }
    .badge {
      background:#2A3B32; color:#fff;
      font-weight:700; font-size:.9rem;
      padding:.15rem .55rem;
      border-radius:6px;
      min-width:3.2rem; text-align:center;
    }
    .mat-title { font-weight:600; color:#2A3B32; font-size:1.05rem; }
    .mat-body { padding:.9rem; font-family:'Raleway',sans-serif; }

    .tiny { font-size:.85rem; color:#6B7280; }

    .chart-wrapper {
      position:relative;
      width:100%;
      height:300px;
    }

    .task-section {
      position:relative;
      background:#E9F0EC;
      border:2px solid #2A3B32;
      border-radius:12px;
      padding:1rem;
      font-family:'Raleway',sans-serif;
      margin-top:.5rem;
    }
    .task-label {
      position:absolute;
      top:-12px;
      left:1rem;
      background:#2A3B32;
      color:#fff;
      padding:.25rem .75rem;
      border-radius:6px;
      font-weight:600;
      font-size:.9rem;
    }
    .task-section ol { margin-left:1rem; }
    .task-section li { margin:.45rem 0; line-height:1.55; font-size:.9rem; }

    .footer {
      padding:0 2rem 1rem 2rem;
      display:flex; justify-content:space-between;
      color:#666; font-size:.9rem;
      font-family:'Raleway',sans-serif;
    }

    @media (max-width:980px){
      .materials-grid{ grid-template-columns:1fr; }
      .chart-wrapper{ height:260px; }
    }
  </style>
</head>
<body>
  <div class="slide-container">
    <!-- Header -->
    <div class="slide-header">
      <div>
        <h1 class="title">Bedeutung von Handelsbilanzen</h1>
        <div class="divider"></div>
      </div>
      <p class="text-sm font-light">Geographie | Klasse 10</p>
    </div>

    <div class="slide-content">



<div class="materials-grid">


        <section class="material">
          <div class="mat-head"><span class="badge">M1</span><div class="mat-title">Deutschland in der Theorie</div></div>
          <img class="mat-img" src="Deutschland_Vision.png" alt="Deutschland">
          <div class="mat-body tiny">Die hohen Exporterlöse lassen Deutschland im Reichtum schwimmen.</div>
        </section>

        
 <section class="material">
          <div class="mat-head"><span class="badge">M3</span><div class="mat-title">Deutschland in der Realität</div></div>
          <img class="mat-img" src="Deutschland_Real.png" alt="Deutschland">
          <div class="mat-body tiny">Jedes dritte Kind in Deutschland lebt in Armut.</div>
        </section>




   



      </div><!-- /materials-grid -->










      <div class="materials-grid">

        <!-- M3: Handelsbilanz Deutschland -->
        <section class="material">
          <div class="mat-head">
            <span class="badge">M3</span>
            <div class="mat-title">Handelsbilanz Deutschlands seit 1970</div>
          </div>
          <div class="mat-body">
            <p class="tiny mb-1">
              Entwicklung von <strong>Exporten</strong> und <strong>Importen</strong> Deutschlands seit 1970
              (in Mio. Euro, <em>tatsächliche Destatis-Daten</em>). Bewege die Maus über das Diagramm:
              Die Fläche zwischen den Kurven wird von 1970 bis zum Jahr unter dem Mauszeiger
              eingefärbt (grün = Exportüberschuss, rot = Importüberschuss).
              In der Realität zeigt Deutschland seit 1970 durchgehend Exportüberschüsse – daher
              wird die Fläche hier fast nur grün sein.
            </p>
            <div class="chart-wrapper">
              <canvas id="germanyTradeBalanceChart"></canvas>
            </div>
            <p id="cumSurplusText" class="tiny mt-1">
              Kumulierter Außenhandelsüberschuss Deutschlands seit 1970 (bis Jahr …): –
            </p>
          </div>
        </section>

        <!-- M4: Index-Entwicklung (schematisch, 1970=100) -->
        <section class="material">
          <div class="mat-head">
            <span class="badge">M4</span>
            <div class="mat-title">
              Kinderarmut, Löhne &amp; Kommunalverschuldung (Index 1970 = 100)
            </div>
          </div>
          <div class="mat-body">
            <p class="tiny mb-1">
              <strong>Schematische</strong> Darstellung der Entwicklung von
              <strong>Kinderarmut</strong>, <strong>inflationsbereinigten Realnettolöhnen</strong>
              und der <strong>Verschuldung öffentlicher Kommunen</strong> in Deutschland.
              Alle Werte sind als <strong>Index</strong> dargestellt (<strong>1970 = 100</strong>) und
              orientieren sich an typischen Trends, nicht an einer offiziellen Einzeltabelle.
            </p>
            <div class="chart-wrapper">
              <canvas id="socialEconomicDevelopmentChart"></canvas>
            </div>
            
          </div>
        </section>

      </div><!-- /materials-grid -->

      <!-- Aufgabenbereich -->
      <a href="Seite 6.html"><section class="task-section">
        <div class="task-label">Arbeitsaufträge</div>
        <ol>
          <li>
            1. <strong>Beschreibe</strong> die Entwicklung der deutschen Exporte und Importe seit 1970.
            In welchen Phasen wächst der Überschuss besonders stark?
            Warum siehst du (fast) nur grüne Flächen?
          </li>
          <li>
            2. <strong>Analysiere</strong> die Indexwerte für Kinderarmut, Realnettolöhne und Kommunalverschuldung.
            Welche Kurve steigt am stärksten, welche verläuft am flachsten?
            Was könnte das über die gesellschaftliche Entwicklung aussagen?
          </li>
          <li>
            <strong>Diskutiere</strong>, wie es sein kann, dass Deutschland trotz dieser konstanten riesigen Exporteinnahmen nicht viel wohlhabender ist als andere westliche Länder.
          </li>
        </ol>
      </section></a>

    </div><!-- /slide-content -->

    <!-- Footer -->
    <div class="footer">
      <p>Theo Schierbaum - Welthandel</p>
      <p>Seite 5</p>
    </div>
  </div>

  <script>
    // ----------------------------------------------------
    // M3: Handelsbilanz Deutschland – reale Destatis-Daten
    // Quelle: Statistisches Bundesamt, "Gesamtentwicklung des
    // deutschen Außenhandels ab 1950" (in Mio. Euro), 1970–2024.
    // ----------------------------------------------------
    const years = [
      1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,
      1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,
      1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,
      2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,
      2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,
      2020,2021,2022,2023,2024
    ];

    const exportsGermany = [
      64053,69541,76194,91212,117893,113297,131219,139897,145671,160785,
      179120,202931,218701,221022,249624,274648,269125,269644,290237,327759,
      348117,340425,343180,321289,353084,383232,403377,454342,488371,510008,
      597440,638268,651320,664455,731544,786266,893042,965236,984140,803312,
      951959,1061225,1092627,1088025,1123746,1193555,1203833,1278876,1317440,1328152,
      1206928,1371397,1594342,1575209,1548403
    ];

    const importsGermany = [
      56041,61416,65826,74351,91896,94238,113595,120245,124605,149318,
      174545,188758,192483,199502,222032,237143,211544,209446,224769,258951,
      293215,329228,325972,289644,315444,339618,352995,394794,423452,444797,
      538311,542774,518532,534534,575448,628087,733994,769887,805842,664615,
      797097,902523,899405,890393,910145,949245,954917,1030977,1088720,1104141,
      1026502,1195499,1506254,1357465,1307797
    ];

    // Jahresüberschuss (Exporte - Importe) und kumulierte Summe
    const annualBalance = exportsGermany.map((e, i) => e - importsGermany[i]);

    // Plugin für Flächenfärbung zwischen den Kurven
    let hoveredIndex = null;

    const tradeBalanceShadingPlugin = {
      id: 'tradeBalanceShading',
      afterDatasetsDraw(chart, args, pluginOptions) {
        if (chart.canvas.id !== 'germanyTradeBalanceChart') return;
        if (hoveredIndex === null) return;

        const { ctx } = chart;
        const metaExp = chart.getDatasetMeta(0); // Exporte
        const metaImp = chart.getDatasetMeta(1); // Importe

        ctx.save();
        const maxIndex = Math.min(hoveredIndex, metaExp.data.length - 1);

        for (let i = 0; i < maxIndex; i++) {
          const diff = annualBalance[i]; // Surplus/Defizit im Jahr i
          const color = diff >= 0
            ? 'rgba(16, 185, 129, 0.25)'   // grün bei Überschuss
            : 'rgba(239, 68, 68, 0.25)';   // rot bei Defizit

          const pExp = metaExp.data[i];
          const pExpNext = metaExp.data[i + 1];
          const pImp = metaImp.data[i];
          const pImpNext = metaImp.data[i + 1];
          if (!pExp || !pExpNext || !pImp || !pImpNext) continue;

          ctx.beginPath();
          ctx.moveTo(pExp.x, pExp.y);
          ctx.lineTo(pExpNext.x, pExpNext.y);
          ctx.lineTo(pImpNext.x, pImpNext.y);
          ctx.lineTo(pImp.x, pImp.y);
          ctx.closePath();
          ctx.fillStyle = color;
          ctx.fill();
        }

        ctx.restore();
      }
    };

    Chart.register(tradeBalanceShadingPlugin);

    const ctxGermanyTrade = document.getElementById('germanyTradeBalanceChart').getContext('2d');

    const germanyTradeBalanceChart = new Chart(ctxGermanyTrade, {
      type: 'line',
      data: {
        labels: years,
        datasets: [
          {
            label: 'Exporte (Mio. €)',
            data: exportsGermany,
            borderColor: 'rgba(16, 185, 129, 0.9)',
            borderWidth: 2,
            pointRadius: 2,
            fill: false,
            tension: 0.1
          },
          {
            label: 'Importe (Mio. €)',
            data: importsGermany,
            borderColor: 'rgba(234, 179, 8, 0.9)',
            borderWidth: 2,
            pointRadius: 2,
            fill: false,
            tension: 0.1
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        interaction: {
          mode: 'nearest',
          intersect: false
        },
        plugins: {
          legend: {
            position: 'top',
            labels: {
              usePointStyle: true,
              font: { family: 'Montserrat', size: 11 }
            }
          },
          tooltip: {
            enabled: true,
            callbacks: {
              label: function(context) {
                const val = context.parsed.y;
                return context.dataset.label + ': ' + val.toLocaleString('de-DE') + ' Mio. €';
              }
            }
          }
        },
        scales: {
          x: {
            title: {
              display: true,
              text: 'Jahr',
              font: { family: 'Montserrat', weight: '600' }
            },
            grid: { display: false }
          },
          y: {
            title: {
              display: true,
              text: 'Wert (Mio. €)',
              font: { family: 'Montserrat', weight: '600' }
            },
            beginAtZero: false,
            grid: { color: 'rgba(209,213,219,0.5)' }
          }
        }
      }
    });

    const cumTextEl = document.getElementById('cumSurplusText');
    const tradeCanvas = document.getElementById('germanyTradeBalanceChart');

    function computeCumulativeSurplus(idx) {
      let sum = 0;
      for (let i = 0; i <= idx; i++) {
        sum += annualBalance[i]; // jetzt: Summe der Überschüsse ALLER Jahre seit 1970
      }
      return sum;
    }

    function updateCumulativeText(idx) {
      if (idx == null) {
        cumTextEl.textContent =
          'Kumulierter Außenhandelsüberschuss Deutschlands seit 1970 (bis Jahr …): –';
        return;
      }
      const year = years[idx];
      const cum = computeCumulativeSurplus(idx);
      const label = cum >= 0 ? 'Außenhandelsüberschuss' : 'Außenhandelsdefizit';
      cumTextEl.textContent =
        `Kumulierter ${label} Deutschlands seit 1970 (bis Jahr ${year}): ${cum.toLocaleString('de-DE')} Mio. €`;
    }

    tradeCanvas.addEventListener('mousemove', function(evt) {
      const points = germanyTradeBalanceChart.getElementsAtEventForMode(
        evt,
        'nearest',
        { intersect: false },
        true
      );
      if (points.length) {
        hoveredIndex = points[0].index;
        updateCumulativeText(hoveredIndex);
        germanyTradeBalanceChart.update();
      } else {
        hoveredIndex = null;
        updateCumulativeText(null);
        germanyTradeBalanceChart.update();
      }
    });

    tradeCanvas.addEventListener('mouseleave', function() {
      hoveredIndex = null;
      updateCumulativeText(null);
      germanyTradeBalanceChart.update();
    });

    // ----------------------------------------------------
    // M4: Kinderarmut, Realnettolöhne, Kommunalverschuldung
    // Schematischer Index (1970 = 100), qualitativ orientiert.
    // ----------------------------------------------------
    const yearsM4 = [1970, 1980, 1990, 2000, 2010, 2020];

    // grob an typischen Entwicklungen orientierte Indexreihen (NICHT exakte Originaldaten!)
    const childPovertyIndex = [100, 120, 140, 160, 190, 210];
    const realNetWageIndex  = [100, 110, 120, 125, 130, 135];
    const municipalDebtIndex = [100, 130, 170, 220, 260, 320];

    const ctxSocio = document.getElementById('socialEconomicDevelopmentChart').getContext('2d');

    new Chart(ctxSocio, {
      type: 'line',
      data: {
        labels: yearsM4,
        datasets: [
          {
            label: 'Kinderarmut (Index, 1970 = 100)',
            data: childPovertyIndex,
            borderColor: 'rgba(234, 179, 8, 0.9)',
            backgroundColor: 'rgba(234, 179, 8, 0.25)',
            borderWidth: 2,
            pointRadius: 3,
            fill: true
          },
          {
            label: 'Realnettolöhne (Index, 1970 = 100)',
            data: realNetWageIndex,
            borderColor: 'rgba(16, 185, 129, 0.9)',
            backgroundColor: 'rgba(16, 185, 129, 0.25)',
            borderWidth: 2,
            pointRadius: 3,
            fill: true
          },
          {
            label: 'Kommunale Verschuldung (Index, 1970 = 100)',
            data: municipalDebtIndex,
            borderColor: 'rgba(75, 85, 99, 0.9)',
            backgroundColor: 'rgba(75, 85, 99, 0.25)',
            borderWidth: 2,
            pointRadius: 3,
            fill: true
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'top',
            labels: {
              usePointStyle: true,
              font: { family: 'Montserrat', size: 11 }
            }
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                const val = context.parsed.y;
                return context.dataset.label + ': ' + val.toFixed(0);
              }
            }
          }
        },
        scales: {
          x: {
            title: {
              display: true,
              text: 'Jahr',
              font: { family: 'Montserrat', weight: '600' }
            },
            grid: { display: false }
          },
          y: {
            title: {
              display: true,
              text: 'Index (1970 = 100)',
              font: { family: 'Montserrat', weight: '600' }
            },
            beginAtZero: false,
            min: 80,
            grid: { color: 'rgba(209,213,219,0.5)' }
          }
        }
      }
    });
  </script>
</body>
</html>
